# DMF - Device Mapping File

## Abstract

The aim is to develop solution allowing NUT to read the SNMP (right now) MIBs mappings from external file.

## XML spec

There are *4* main structures
 * info_lkp_t
 * alarms_info_t
 * snmp_info_t
 * mib2nut_info_t

### LOOKUP

<nut>
    <lookup name="ats_output_status_info">
        <item oid = "1" info = "OFF" />
    </lookup>
</nut>

## Tools

 * jsonify-mib.py - print mib mapping to stdout

## jsonify-mib.py

Tool parses -mib.c files (snmp_info_t and info_lkp_t) and prints the output of
those as JSON. Note this is NOT intended as final DMF form, this json is
intermediate form for easier processing.

You need pycparser installed
    via your package management

of using pip
    virtualenv dmf
    source dmf/bin/activate
    pip install -e pycparser

Usage is then

    python jsonify-mib.py ../../drivers/apc-ats-mib.c
    {
        "INFO": {
            "ats_output_status_info": {
                "1": "OFF",
                "2": "OL"
            },
            "ats_sensitivity_info": {
                "1": "high",
                "2": "low"
            },
    ...

